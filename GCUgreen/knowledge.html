<!DOCTYPE html>
<html lang="en-US" class="ge_html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="format-detection" content="telephone=no">
    <title>垃圾分类知识 - 绿色华广</title>

    <link rel="stylesheet" href="static/css/layerslider.css" type="text/css" media="all">
    <link rel="stylesheet" href="static/css/layerslider.custom.css" type="text/css" media="all">
    <link rel="stylesheet" href="static/css/css.css" type="text/css" media="all">

    
    <link rel="stylesheet" href="static/css/style_cms.css" type="text/css" media="screen, print">
    <link rel="stylesheet" href="static/css/style_ge.css" type="text/css" media="screen, print">

    <link rel="stylesheet" href="static/css/retina.css" type="text/css" media="screen">
    <link rel="stylesheet" href="static/css/fontello_cms.css" type="text/css" media="screen">
    <link rel="stylesheet" href="static/css/fontello_ge.css" type="text/css" media="screen">
    <link rel="stylesheet" href="static/css/adaptive_ge.css" type="text/css" media="screen, print">
    <link rel="stylesheet" href="static/css/animate.css" type="text/css" media="screen">
    <link rel="stylesheet" href="static/css/ilightbox.css" type="text/css" media="screen">
    <link rel="stylesheet" href="static/css/dark-skin.css" type="text/css" media="screen">
    <link rel="stylesheet" href="static/css/ge.css" type="text/css" media="screen">

    <!--[if lte IE 9]>
    <link rel='stylesheet' href="static/src/ge_fonts.css" type='text/css' media='screen'/>
    <link rel='stylesheet' href="static/src/ge_colors_primary.css?1" type='text/css' media='screen'/>
    <link rel='stylesheet' href="static/src/ge_colors_secondary.css?1" type='text/css'
          media='screen'/>
    <link rel='stylesheet' href="static/src/ie.css" type='text/css' media='screen'/>
    <![endif]-->

    <script type="text/javascript" src="static/js/greensock.js"></script>
    <script type="text/javascript" src="static/base/jquery.js"></script>
    <script type="text/javascript" src="static/js/jquery-migrate.min.js"></script>

    <link rel="stylesheet" href="ge/css/layouts.main.css" type="text/css" media="screen"/>
        <link rel="stylesheet" href="static/css/adaptive_cms.css" type="text/css" media="screen, print">
    <link rel="stylesheet" href="static/css/eco-press_cms.css" type="text/css" media="screen, print">
    <link rel="stylesheet" href="static/css/cms-woo.css" type="text/css" media="screen, print">
    <link rel="stylesheet" href="static/css/cms-woo-phone.css" type="text/css" media="screen, print">
    <link rel="stylesheet" href="ge/css/knowledge.index.css" type="text/css" media="screen, print">
    <link rel="stylesheet" href="ge/css/footer.css" type="text/css" media="screen, print">

    
    <script type="text/javascript" src="static/js/layerslider.kreaturamedia.jquery.js"></script>
    <script type="text/javascript" src="static/js/layerslider.transitions.js"></script>
    <script type="text/javascript" src="static/js/jquery.themepunch.tools.min.js"></script>
    <script type="text/javascript" src="static/js/jquery.themepunch.revolution.min.js"></script>
    <script type="text/javascript" src="static/js/jsLibraries.min.js"></script>
    <script type="text/javascript" src="static/js/jquery.iLightBox.min.js"></script>
	<script type="text/javascript">
    $(window).load(function() {
        loadLogin();
    });
    </script>
</head>

<body class="home page-template-default page page-id-7366 tribe-no-js">
<div id="page"
     class="csstransition chrome_only ge_liquid fixed_header ge_heading_under_header ge_header_overlaps_enabled hfeed site">

    <div id="main">
        <style type="text/css">
            
            
            .login{
                margin:0 auto;
                width: 500px
            }
            .signform {
    font-family: 微软雅黑;
    position: fixed;
    background-color: white;
    top: 20%;
    left: 30%;
    width: 500px;
    height: 400px;
    border-radius: 1em;
    text-align: center;
    z-index: 999;
}
#registerform {
    height: 450px;
}
.signclose {
    cursor: pointer;
    float: right;
    overflow: hidden;
    text-align: center;
    position: relative;
    height: 35px;
    width: 35px;
    margin-top: 10px;
    margin-right: 10px;
}
#registerloading{
    position: absolute;
    width: 25px;
    height: 25px;
    left: 410px;
    top: 90px;
}
.signinput {
    text-align: center;
    border-radius: 0.2em;
    width: 280px;
    height: 45px;
    border: none;
    background-color:#f2f2f2;
    font-size: 28px;
}
.signinput::-webkit-input-placeholder {
    font-size: 26px;
}
.userdiv {
    position: relative;
    text-align: center;
    margin-top: 80px;
}
.pwddiv {
    position: relative;
    text-align: center;
    margin-top: 20px;
}
.postdiv {
    position: relative;
    text-align: center;
    margin-top: 20px;
}
.postdiv button {
    cursor: pointer;
    text-align: center;
    color: white;
    font-size: 26px;
    border: none;
    border-radius: 0.4em;
    width: 280px;
    height: 45px;
    background-color:#4CAF50;
}
            
            
            
            
        </style>
        <!-- _________________________ Start Header _________________________ -->
                    <header id="header">
                <div class="header_mid" data-height="98">
                    <div class="header_mid_outer">
                        <div class="header_mid_inner">
                            <div class="logo_wrap">
                                <a href="index.html" title="绿色华广" class="logo">
                                    <img src="static/images/logo-gg.png" alt="绿色华广">
                                    <img class="logo_retina" src="static/images/logo-gg.png"
                                         alt="绿色华广"
                                         width="160" height="70">
                                    <img class="logo_overlaps_scroll" src="static/images/logo-gg2.png"
                                         alt="绿色华广">
                                    <img class="logo_retina logo_retina_overlaps_scroll"
                                         src="static/images/logo-gg2.png" alt="绿色华广"
                                         width="160" height="70">
                                </a>
                            </div>

                            <div class="resp_mid_nav_wrap">
                                <div class="resp_mid_nav_outer">
                                    <a class="responsive_nav resp_mid_nav ge_theme_icon_resp_nav"
                                       href="javascript:void(0);">
                                    </a>
                                </div>
                            </div>

                            <!-- _________________________ Start Navigation _________________________ -->
                            <style type="text/css">
                                .nav_item_wrap .nav_title {
                                    opacity: 0.5;
                                }

                                .nav_item_wrap .nav_title:hover {
                                    opacity: 1;
                                }

                                .navi_scrolled .nav_item_wrap .nav_title {
                                    opacity: 1;
                                }
                            </style>

                            <div class="mid_nav_wrap">
                                <nav>
                                    <div class="menu-main-menu-container">
                                        <ul id="navigation" class="mid_nav navigation">
                                            <li class="menu-item ">
                                                <a href="index.html">
                                                    <span class="nav_item_wrap"><span class="nav_title">关于绿色华广</span></span>
                                                </a>
                                            </li>
                                            <li class="menu-item">
                                                <a href="knowledge.html">
                                                    <span class="nav_item_wrap"><span class="nav_title">垃圾分类知识</span></span>
                                                </a>
                                            </li>
                                            <li class="menu-item">
                                                <a href="distinguish.html">
                                                    <span class="nav_item_wrap"><span class="nav_title">垃圾识别</span></span>
                                                </a>
                                            </li>
                                            
                                                
                                                    
                                                
                                            
                                            <li class="menu-item">
                                                <a href="game.html">
                                                    <span class="nav_item_wrap"><span class="nav_title">垃圾分类小游戏</span></span>
                                                </a>
                                            </li>
                                            <li class="menu-item"> <a href="message.html"> <span class="nav_item_wrap"><span class="nav_title">留言墙</span></span> </a> </li>
                                            <li class="menu-item">
                                                <a href="advert.html">
                                                    <span class="nav_item_wrap"><span class="nav_title">广告招商</span></span>
                                                </a>
                                            </li>                                            
                                        </ul>
                                    </div>
                                </nav>
                            </div>
							<div id="logindiv" class="login"><a onclick="start()">登录|注册</a></div>
                            <div id="outdiv" class="login" style="display: none"><span id="loginName"></span><a onclick="out()">退出</a></div>
                            <div class="signform" id="signform" style="display: none">
    <div class="signclose">
        <img alt="关闭" src="static/images/close.png" width="35px" height="35px" onclick="signclose()">
    </div>
    <div class="userdiv">
    <input id="user" class="signinput" type="text" placeholder="用户名" name="user" >
    </div>
    <div class="pwddiv">
    <input id="pwd" class="signinput" type="password" placeholder="密码" name="pwd">
    </div>
    <div class="postdiv">
    <button onClick="login()">登录</button>
    </div>
    <br>
    <div style="color: #4d4d4d;text-align: center;">
        <p>还没有账号?赶快<a href="#" style="text-decoration: none;color: #43A047">注册</a>一个吧</p>
    </div>
    <div id="error" style="color: #4d4d4d;text-align: center;display: none">
        <p>登录失败，请重试</p>
    </div>
</div>
<div class="signform" id="registerform" style="display: none">
        <div class="signclose">
            <img alt="关闭" src="static/images/close.png" width="35px" height="35px" onclick="signclose()">
        </div>
        <div class="userdiv">
            <input  id="registeruser" class="signinput" type="text" placeholder="用户名" name="user">
        </div>
        <div class="pwddiv">
            <input  id="registerpwd" class="signinput" type="password" placeholder="密码" name="pwd">
        </div>
        <div class="pwddiv">
            <input  id="registerrepwd" class="signinput" type="password" placeholder="再次输入密码" name="pwd">
        </div>
        <div class="postdiv">
            <button>注册(暂不可用)</button>
        </div>
        <br>
        <div class="change" style="color: #4d4d4d;text-align: center;">
            <p>已有账号?立刻去<a href="#" style="text-decoration: none;color: #43A047">登录</a>吧</p>
        </div>
</div>
                            <!-- _________________________ Finish Navigation _________________________ -->

                        </div>
                    </div>

                </div>

            </header>
                                <!-- _________________________ Finish Header _________________________ -->

            <!-- _________________________ Start Middle _________________________ -->

                    <!-- _________________________ Start Middle _________________________ -->
    <div id="middle">
        <style type="text/css">
            #ajax_list{
                margin-top: 1px;
            }
            #ajax_list li{
                margin: 0 auto;
            }
            @media  only screen and (min-width: 1025px) {
                .headline_outer {
                    background-image: url(static/images/header.png);
                    background-repeat: no-repeat;
                    background-attachment: scroll;
                    background-size: cover;
                    height: 98px;
                }
            }
            @media  only screen and (max-width: 500px){
                #wiki_search{
                    margin-top: 38px;
                }
                #ajax_list li{
                    border-left-width: 1px;
                    margin-top: 38px;
                }
            }
            @media  only screen and (max-width: 1024px) and (min-width: 768px){
                #ajax_list li{
                    width: 33.3%;
                    border-width: 0;
                }
            }
        </style>

        <div class="headline cmsmasters_color_scheme_default">
            <div class="headline_outer" id="min_screen">
                <div class="headline_color">
                </div>
            </div>
        </div>

        <div class="middle_inner">
            <div class="content_wrap fullwidth cmsmasters_woo">

                <!--_________________________ Start Content _________________________ -->
                <div class="middle_content entry">
                    <div class="cmsmasters_woo_wrap_result">
                        <div class="woocommerce-ordering">
                            <select class="wiki_type">
                                <option value="0">全部</option>
                                <option value="1">可回收垃圾&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</option>
                                <option value="2">厨余垃圾</option>
                                <option value="3">有害垃圾</option>
                                <option value="4">其他垃圾</option>
                            </select>
                        </div>
                        <div class="search_bar_wrap woocommerce-ordering" id="wiki_search">
                            <p class="search_field">
                                <input placeholder="搜索..." id="search_content" type="text"/>
                            </p>
                            <p class="search_button">
                                <button type="text" id="knowledge_search" class="cmsmasters_theme_icon_search"></button>
                            </p>

                        </div>
                    </div>

                    <ul class="products cmsmasters_products" id="ajax_list" type="0">
                        <li class="product type-product status-publish has-post-thumbnail product_cat-cosmetics last outofstock shipping-taxable purchasable product-type-simple"
                            v-for="item in items">
                            <article class="cmsmasters_product" style="margin: 0">
                                <figure class="cmsmasters_product_img preloader">
                                    <span>
                                        <img alt="图片" width="320" height="268" style="border: 1px #53d572 solid;"
                                             :src="'knowledge/picture/'+item.image"
                                             class="attachment-shop_catalog size-shop_catalog wp-post-image"
                                             :title="item.title"/>
                                    </span>
                                </figure>

                                <div class="cmsmasters_product_inner">
                                    <div class="cmsmasters_product_inner_top">
                                        <header class="cmsmasters_product_header entry-header">
                                            <h3 class="cmsmasters_product_title entry-title" style="text-align: center">
                                                 <span style="color:black;">
                                                    {{ item.title }}
                                                </span>

                                            </h3>
                                            <h3 style="text-align: center;margin: 0">
                                                 <span style="font-size: 16px;color:#46c965">
                                                    {{ wikiType(item.type) }}
                                                </span>
                                            </h3>
                                        </header>
                                        <div class="cmsmasters_product_cat entry-meta">
                                            <p>
                                                {{ item.content }}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </article>
                        </li>

                    </ul>
                </div>
                <!-- _________________________ Finish Content _________________________ -->


                <div class="cmsmasters_wrap_more_posts cmsmasters_wrap_more_items cmsmasters_loading cmsmasters_theme_icon_spinner rotate_icon"
                     style="margin-top: 30px">
                    <div class="cmsmasters_wrap_post_loader cmsmasters_wrap_items_loader">
                        <a href="javascript:;" style="background-color: #53d572"
                           class="button ge_slider_post_read_more loading-more" data-status="1">
                            <span style="display: none"></span>
                        </a>
                        <span class="loading-none" style="display: none">没有更多可以显示了</span>
                        <input type="hidden" id="loading-page" value="1">
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- _________________________ Finish Middle _________________________ -->


                    <div id="ge_row_58f062f29dcb8"
                 class="ge_row ge_color_scheme_footer ge_row_top_default ge_row_bot_default ge_row_boxed">
                <div class="ge_row_outer_parent">
                    <div class="ge_row_outer">
                        <div class="ge_row_inner">
                            <div class="ge_row_margin">
                                <div class="ge_column one_first">
                                    <div class="ge_sidebar sidebar_layout_131313">
                                        <aside id="text-4" class="widget widget_text">
                                            <div class="div1">
                                                <div class="textwidget div-second1">
                                                    <img alt="图片" src="static/images/phone-gg.png">
                                                    <p class="p-second" style="color:white">13066991626</p>
                                                    <p class="clear"></p>
                                                </div>
                                                <div style="clear: both"></div>
                                                <div class="textwidget div-second2">
                                                    <img alt="图片" src="static/images/point-gg.png">
                                                    <p class="p-second" style="color:white">
                                                        广东省广州市花都区学府路一号华南理工大学广州学院</p>
                                                    <p class="clear"></p>
                                                </div>
                                            </div>
                                        </aside>
                                        <aside id="text-5" class="widget widget_text">
                                            <div class="textwidget div2">
                                                <p style="color: white;">关注官方微信</p>

                                                    <img alt="图片" class="text-image"
                                                         src="static/images/weixin-gg.png"
                                                         width="200" height="200">

                                            </div>

                                            <div class="textwidget div3">
                                                <p style="color: white;">关注官方微博</p>

                                                    <img alt="图片" class="text-image"
                                                         src="static/images/weibo-gg.png"
                                                         width="200" height="200">

                                            </div>
                                        </aside>
                                    </div>
                                    <div class="cl"></div>
                                </div>

                            </div>
                            <div class="copyright" style="margin-top: 20px;">
                                <h4 style="text-align: center;font-weight: 300;color:#999999;text-transform:capitalize;font-size: 13px">
                                    Copyright &copy 2019 Lucas Ho All Rights Reserved
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        

    </div>
    <!-- _________________________ Finish Middle _________________________ -->

    <a href="javascript:void(0);" id="slide_top" class="ge_theme_icon_slide_top"></a>
</div>
<!-- _________________________ Finish Main _________________________ -->

<span class="ge_responsive_width"></span>
<!-- _________________________ Finish Page _________________________ -->


<script type="text/javascript" src="static/js/jquery.megaMenu.js"></script>
<script type="text/javascript" src="static/js/jquery.form.min.js"></script>
<script type="text/javascript" src="static/js/scripts.js"></script>
<script type="text/javascript" src="static/js/jquery.blockUI.min.js"></script>
<script type="text/javascript" src="static/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="static/js/jqueryLibraries.min.js"></script>
<script type="text/javascript" src="static/js/jquery.tweet.min.js"></script>

<script type="text/javascript" src="static/js/jquery.script.js"></script>
<script type="text/javascript" src="static/js/jquery.cmsmasters-woo-script.js"></script>
<script type="text/javascript" src="ge/js/layouts.main.js"></script>
<script>
    // 菜单加颜色
    $(function () {
        $('ul.navigation > li.menu-item > a').each(function () {
            if ( ($(this).attr('href').indexOf(window.document.location.pathname) > -1 && window.document.location.pathname!=='/') || $(this).attr('href')+'/'===location.href) {
                $(this).parent().addClass("current_page_item");
                $(this).children('span').children('span').css('opacity', 1);
            }
        });
    });

</script>

    <script type="text/javascript" src="static/js/jquery.isotope.mode_cms.js"></script>
    <script type="text/javascript" src="static/js/jquery.isotope_cms.min.js"></script>
    <script type="text/javascript" src="static/base/vue.js"></script>

    <script type="text/javascript">
        $(function () {
            // vue渲染列表
            var allData = [];
            var knowledgeLists = new Vue({
                el: '#ajax_list',
                data: {
                    items: []
                },
                methods: {
                    wikiType: function (type) {
                        if (type == 1) {
                            return '可回收垃圾';
                        } else if (type == 2) {
                            return '厨余垃圾';
                        } else if (type == 3) {
                            return '有害垃圾';
                        } else if (type == 4) {
                            return '其他垃圾';
                        }
                    }
                }
            });

            // 第一次进入请求数据,默认全部wiki=0
            ajaxRequest(0);

            // 滑动加载更多
            var scrollTop;     // 获取滚动条到顶部的距离
            var scrollHeight;  // 获取文档区域高度
            var windowHeight;  // 获取滚动条的高度
            var flag = true;   // 加载数据标志
            var scrollHandler = function () {
                scrollTop = $(this).scrollTop();
                scrollHeight = $(document).height();
                windowHeight = $(this).height();
                var ratio = (scrollHeight - windowHeight - scrollTop) / windowHeight; // 页面不用到底部就刷新
                var page = $("#loading-page").val();

                // 有搜索条件时不刷新
                if ($('#search_content').val() == '') {
                    if (ratio < 0.25 && flag == true) {
                        var wikiType = $("#ajax_list").attr('type');

                        // 每3页做一次停顿
                        if (page % 3 == 0) {
                            ajaxRequest(wikiType);

                            // 不能写成$(window).unbind('scroll');这样会禁用所有的scroll
                            $(window).unbind('scroll', scrollHandler);

                            // 如果刚好第三页后没有数据，则不显示
                            if (num > 0) {
                                $('.loading-more span').html('显示更多');
                            }
                        } else {
                            ajaxRequest(wikiType);
                        }
                    }
                }
            }

            // 定义鼠标滚动事件
            $(window).scroll(scrollHandler);

            // 继续加载按钮事件
            $('.loading-more').click(function () {
                $('.loading-more span').hide();
                var wikiType = $("#ajax_list").attr('type');

                ajaxRequest(wikiType); // 必须执行一次，不然点击没效果
                $(window).scroll(scrollHandler); // 打开scroll
            });


            // ajax请求
            function ajaxRequest(wikiType) {
                var page = $("#loading-page").val();
                $.ajax({
                    url: "http://localhost:8080/gcugreen/knowledge/list",
                    type: "GET",
					data: {'type': wikiType, 'page': page},
                    dataType: 'json',
                    async: false,
                    success: function (data) {
                        if (data) {
                            // 数据不够16条隐藏按钮
                            num = data.total - 16 * page;

                            if (data.data.length < 16 || num == 0) {
                                $('.loading-more span').hide();
                                $('.loading-none').show();
                                $('.loading-none').html('没有更多可以显示了');
                                $('.loading-none').css({'height': '10px'});

                                // 隐藏加载动画
                                $('.rotate_icon').removeClass('cmsmasters_loading cmsmasters_theme_icon_spinner');

                                flag = false; // 不让自动加载了
                            } else {
                                $("#loading-page").val(parseInt(page) + 1); //记录页码
                                $('.loading-more span').css('display', 'block');

                                if (page % 3 == 0) {
                                    $('.loading-more span').html('显示更多');
                                } else {
//                                    $('.loading-more span').html('加载中...');
                                    $('.loading-more span').hide();
                                    $('.rotate_icon').addClass('cmsmasters_loading cmsmasters_theme_icon_spinner');
                                    $('.rotate_icon').css('display', 'block');
                                }
                            }

                            // 保存请求数据
                            allData = allData.concat(data.data);
                            console.log(allData)
                            // 更新数据
                            knowledgeLists.$data.items = allData;
                        } else {

                        }
                    },
                    error: function (data) {
						console.log(data)
                    }
                });
            }

            // select选择框事件
            $('.wiki_type').change(function () {
                var wikiType = $(this).find("option:selected").val();
				console.log(wikiType)

                $("#ajax_list").empty(); // 清空list列表
                $('#search_content').val(''); // 清空搜索框

                $("#ajax_list").attr('type', wikiType);
                $("#loading-page").val(1); // 切换后页码为1
                $('.loading-none').css('display', 'none'); // 隐藏显示
                keywordBefore = '';

                ajaxRequest(wikiType);

                flag = true; // 选择事件后打开flag
                $(window).scroll(scrollHandler); // 打开scroll

            });


            // 搜索 动态改变事件
            keywordBefore = ''; // 上一次输入关键字
            wikiData = '';
            $('#search_content').change(function () {
                var keyword = $('#search_content').val();

                if (keyword === '') {
                    $("#ajax_list").empty();
                    $("#loading-page").val(1); // 请求第一页
                    $(".type option[value='0']").prop('selected', 'selected'); // 清空后默认全部
                    // 添加加载动画
                    $('.rotate_icon').addClass('cmsmasters_loading cmsmasters_theme_icon_spinner');

                    // 删除搜索结果
                    for (var k = 0, length = wikiData.length; k < length; k++) {
                        knowledgeLists.items.pop(wikiData[k]);
                    }

                    ajaxRequest(0);
                    flag = true; // 选择事件后打开flag
                    $(window).scroll(scrollHandler); // 打开scroll
                    keywordBefore = '';
                }

                // 值有变化且不为空时才请求
                if (keyword !== keywordBefore && keyword != undefined && keyword != null) {
                    if (keyword !== '') {
                        // 隐藏加载动画
                        $('.rotate_icon').removeClass('cmsmasters_loading cmsmasters_theme_icon_spinner');

                        $.ajax({
                            url: "http://localhost:8080/gcugreen/knowledge/search",
                            type: "GET",
                            data: {'keyword': keyword},
                            dataType: 'json',
                            success: function (data) {
                                if (data.data.length != 0) {
                                    $("#ajax_list").empty();
                                    $('.loading-more span').hide();
                                    $('.loading-none').hide();

                                    // 保存请求数据
                                    wikiData = data.data;
                                    allData = allData.concat(wikiData);
                                    // 更新数据
                                    knowledgeLists.$data.items = allData;
                                } else {
                                    $("#ajax_list").empty();
                                    $('.loading-none').show();
                                    $('.loading-none').html('没有搜索记录！');
                                    $('.loading-none').css({'height': '409px', 'display': 'block'});
                                }
                            },
                            error: function () {

                            }
                        });
                        // 保存之前值
                        keywordBefore = keyword;
                    }
                } else {
                    $("#ajax_list").empty();
                    $('.loading-more span').hide();
                    $('.loading-none').hide();

                    // 更新数据
                    allData = allData.concat(wikiData);
                    knowledgeLists.$data.items = allData;
                }
            });
        });

    </script>

<script src="static/js/signformchange.js"></script>

	
</body>
</html>
